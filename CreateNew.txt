CREATE TABLE Pessoa (
id INT NOT NULL AUTO_INCREMENT,
nome VARCHAR(255) NOT NULL,
cpf VARCHAR(11) NOT NULL,
contato VARCHAR(255) NOT NULL,
endereco VARCHAR(255) NOT NULL,
PRIMARY KEY (id)
);

CREATE TABLE Funcionario (
id INT NOT NULL AUTO_INCREMENT,
enderecoFilial VARCHAR(255) NOT NULL,
PRIMARY KEY (id),
FOREIGN KEY (id) REFERENCES Pessoa (id)
);

CREATE TABLE Cliente (
id INT NOT NULL AUTO_INCREMENT,
tipo VARCHAR(255) NOT NULL,
PRIMARY KEY (id),
FOREIGN KEY (id) REFERENCES Pessoa (id)
);

CREATE TABLE Compra (
nota_fiscal VARCHAR(255) NOT NULL,
data DATE NOT NULL,
valor DECIMAL(10,2) NOT NULL,
id_funcionario INT NOT NULL,
id_cliente INT NOT NULL,
PRIMARY KEY (nota_fiscal),
FOREIGN KEY (id_funcionario) REFERENCES Funcionario (id),
FOREIGN KEY (id_cliente) REFERENCES Cliente (id)
);

CREATE TABLE Locacao (
id INT NOT NULL AUTO_INCREMENT,
data DATE NOT NULL,
dtLocacao DATE NOT NULL,
dtReserva DATE NOT NULL,
id_funcionario INT NOT NULL,
id_cliente INT NOT NULL,
PRIMARY KEY (id),
FOREIGN KEY (id_funcionario) REFERENCES Funcionario (id),
FOREIGN KEY (id_cliente) REFERENCES Cliente (id)
);

CREATE TABLE Filme (
cod_filme VARCHAR(255) NOT NULL,
titulo VARCHAR(255) NOT NULL,
genero VARCHAR(255) NOT NULL,
sinopse TEXT NOT NULL,
dt_lancamento DATE NOT NULL,
PRIMARY KEY (cod_filme)
);

CREATE TABLE Filme_venda (
cod_filme VARCHAR(255) NOT NULL,
preco_venda DECIMAL(10,2) NOT NULL,
qtdeEstoque INT NOT NULL,
PRIMARY KEY (cod_filme),
FOREIGN KEY (cod_filme) REFERENCES Filme (cod_filme)
);

CREATE TABLE ComporCompra (
cod_filme VARCHAR(255) NOT NULL,
nota_fiscal VARCHAR(255) NOT NULL,
quantidade INT NOT NULL,
PRIMARY KEY (cod_filme, nota_fiscal),
FOREIGN KEY (cod_filme) REFERENCES Filme_venda (cod_filme),
FOREIGN KEY (nota_fiscal) REFERENCES Compra (nota_fiscal)
);

CREATE TABLE Filme_aluguel (
cod_filme VARCHAR(255) NOT NULL,
preco_diario DECIMAL(10,2) NOT NULL,
qtdDisponivel INT NOT NULL,
PRIMARY KEY (cod_filme),
FOREIGN KEY (cod_filme) REFERENCES Filme (cod_filme)
);

CREATE TABLE ComporAluguel (
cod_filme VARCHAR(255) NOT NULL,
id INT NOT NULL,
data_reserva DATE NOT NULL,
data_dev_prevista DATE NOT NULL,
data_dev_efetiva DATE NOT NULL,
status VARCHAR(255) NOT NULL,
PRIMARY KEY (cod_filme, id),
FOREIGN KEY (cod_filme) REFERENCES Filme_aluguel (cod_filme),
FOREIGN KEY (id) REFERENCES Locacao (id)
);

CREATE TABLE IntegranteFilme (
id INT NOT NULL AUTO_INCREMENT,
nome VARCHAR(255) NOT NULL,
PRIMARY KEY (id)
);

CREATE TABLE Participacao (
cod_filme VARCHAR(255) NOT NULL,
id INT NOT NULL,
diretor BOOLEAN NOT NULL,
atorPrincipal BOOLEAN NOT NULL,
PRIMARY KEY (cod_filme, id),
FOREIGN KEY (cod_filme) REFERENCES Filme (cod_filme),
FOREIGN KEY (id) REFERENCES IntegranteFilme (id)
);